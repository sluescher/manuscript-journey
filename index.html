<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Al-Muẓaffarī's Story</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/scrollama/3.2.0/scrollama.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* <weight>: Use a value from 100 to 700 */
        /* <uniquifier>: Use a unique and descriptive class name */
        .josefin-sans-googlefont {
            font-family: "Josefin Sans", sans-serif;
            font-optical-sizing: auto;
            font-weight: <weight>;
            font-style: normal;
        }
        
        .noto-sans-googlefont {
            font-family: "Noto Sans", sans-serif;
            font-optical-sizing: auto;
            font-weight: 100;
            font-style: normal;
            font-variation-settings: "wdth" 100;
        }

        body {
            font-family: "Noto Sans", sans-serif;
            line-height: 1.6;
            color: white;
            background: black;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background: black;
        }


        /* Fixed white header bar */
        .header-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 80px;
            background: black;
            z-index: 1001;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        /* Title in header bar */
        .main-title {
            font-size: 2rem;
            font-weight: bold;
            color: white;
            font-family: "Noto Sans", sans-serif;
        }

        /* Author name in header bar */
        .navigation {
            display: flex;
            gap: 30px;
        }

        .nav-link {
            font-size: 1.2rem;
            color: white;
            text-decoration: none;
            font-family: "Noto Sans", sans-serif;
            transition: color 0.3s ease;
        }

        .nav-link:hover {
            color: #66b2b2;
        }

        /* Fixed background container */
        #background {
            position: fixed;
            top: 80px; /* Offset by header height */
            left: 0;
            width: 100%;
            height: calc(100vh - 80px); /* Subtract header height */
            z-index: -1;
            transition: opacity 1s ease-in-out;
        }

        .bg-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .bg-image.active {
            opacity: 1;
        }

        /* Background images */
        .bg-image:nth-child(1) {
            background-image: url('images/manynotes.png');
        }

        .bg-image:nth-child(2) {
            background-image: url('images/library-scene.jpg');
        }

        .bg-image:nth-child(3) {
            background-image: url('images/manuscript1.jpeg');
        }
        .bg-color:nth-child(4) {
            background-color: black;
        }

        /* Scrollable content */
        #content {
            position: relative;
            z-index: 1000;
            margin-top: 80px; /* Offset by header height */
        }

        .step {
            min-height: calc(100vh - 80px); /* Subtract header height */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            margin-bottom: calc(100vh - 80px); /* Subtract header height */
        }

        .text-container {
            max-width: 600px;
            text-align: center;
            background: rgba(0, 0, 0, 0.4);
            padding: 3rem;
            border-radius: 0px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .step.active .text-container {
            opacity: 1;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        h2 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: #66b2b2;
        }

        p {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
        }

        /* Spacer for smooth scrolling */
        .spacer {
            height: calc(100vh - 80px); /* Subtract header height */
        }
    </style>
</head>
<body>
    <!-- Fixed white header bar -->
    <div class="header-bar">
        <div class="main-title">Research Proposal</div>
        <nav class="navigation">
            <a href="stephanieluescher.html" class="nav-link">Stephanie Luescher</a>
        </nav>
    </div>

    <!-- Fixed background with multiple images -->
    <div id="background">
        <div class="bg-image active"></div>
        <div class="bg-image"></div>
        <div class="bg-image"></div>
    </div>

    <!-- Scrollable content -->
    <div id="content">
        <div class="spacer"></div>
        
        <div class="step" data-step="0">
            <div class="text-container">
                <h1>The Journey Begins</h1>
                <p>In the beginning, there was only the vast expanse of possibility. A world waiting to be discovered, stories waiting to be told, and dreams waiting to take flight.</p>
                <p>As we embark on this journey together, let the colors of the sky remind us that every ending is just a new beginning in disguise.</p>
            </div>
        </div>

        <div class="step" data-step="1">
            <div class="text-container">
                <h2>The Middle Path</h2>
                <p>Halfway through our tale, the landscape shifts and transforms. What once seemed certain becomes fluid, and what appeared impossible begins to take shape.</p>
                <p>Here, in this space between beginning and end, we find the true magic of transformation. The colors deepen, the story unfolds, and we discover that change is the only constant.</p>
            </div>
        </div>

        <div class="step" data-step="2">
            <div class="text-container">
                <h2>The New Dawn</h2>
                <p>As our journey reaches its crescendo, the world around us bursts into vibrant new colors. Pink and coral hues paint the sky, promising new adventures and endless possibilities.</p>
                <p>This is not an ending, but a graduation. From here, you carry forward the wisdom of the journey, ready to write your own story against whatever backdrop life provides.</p>
            </div>
        </div>
        <div class="step" data-step="3">
            <div class="container">
                <h1>Networks of Power</h1>
                <p>Orci fringilla ultricies. Egestas felis litora nibh, hac volutpat mattis laoreet morbi dolor gravida duis platea iaculis congue mattis vestibulum, 
                aenean blandit, venenatis hac netus sociosqu, mi augue. Lorem lorem nibh. Erat libero. Suscipit etiam dapibus nulla enim scelerisque turpis justo 
                Amet justo pharetra cursus potenti cras mi augue luctus eu id proin. Mauris senectus. Fames integer. Semper aenean porta inceptos convallis tellus 
                sem cras, urna lacinia. Lectus arcu proin ut varius. Sapien facilisi laoreet dictum mattis nascetur vitae molestie. Diam lacus condimentum laoreet 
                posuere taciti. Ultrices. Est quam, vehicula enim nonummy. Quisque non mauris felis vehicula sociis inceptos ornare vehicula eget primis convallis.</p>
                <p>Maecenas hendrerit In quis. Hac elit imperdiet neque morbi parturient nostra convallis, vel vulputate Nisl interdum felis rhoncus gravida. Venenatis 
                aliquam habitant felis etiam dolor sodales in magnis facilisi sit vel. Volutpat sociosqu ac vehicula sodales maecenas dictumst Vel. Lorem eget senectus 
                lacus elementum tincidunt fringilla. Id dictumst magna ultrices est libero ultricies porta. Enim malesuada. Augue non Cubilia vitae ut, praesent sociis 
                cum habitasse et. In commodo ultricies eget potenti suspendisse dignissim. Ipsum lacinia. Lobortis consequat tristique tristique molestie dictum pede 
                posuere a. Egestas.</p>
                <p>Vel cursus praesent aptent non est vivamus tempus nullam dis at ac. Consequat curae; lacus suscipit luctus lectus. Leo posuere dictumst inceptos 
                    luctus egestas nullam dui nascetur auctor ornare donec pulvinar tempor cursus mattis pretium dui commodo turpis rutrum, pretium sollicitudin. 
                    Euismod etiam tristique, vivamus cras eros dui sed sociosqu felis duis augue eleifend consectetuer Vitae dui pharetra lacinia nam felis cubilia 
                    proin blandit taciti augue tortor vulputate. Penatibus et sed ante consectetuer elit nullam faucibus pharetra aliquam, dictum dictumst suspendisse. 
                    Ultrices sed magna fusce consequat massa eros fames mus pellentesque, facilisis. Nibh auctor sociis, lorem taciti commodo ad ligula nisi odio massa 
                    pellentesque lobortis tempus sem ridiculus pellentesque adipiscing iaculis taciti erat congue cubilia. In. Leo fermentum sagittis nisl. Laoreet euismod. 
                    Hendrerit. Senectus ad venenatis, hac ut velit justo. Sollicitudin viverra. At potenti lorem nostra nonummy. Egestas inceptos class a.Ipsum orci 
                    scelerisque venenatis cras vulputate eleifend lacus proin sodales eget laoreet. Nibh, ultricies nibh curae; ultrices ridiculus adipiscing semper. 
                    Maecenas nostra nec magna arcu massa eros nonummy habitasse fames montes, rhoncus tincidunt vulputate curae; massa platea aliquet vivamus blandit 
                    litora curabitur purus, velit class, quis nulla malesuada odio ac pede Eu odio aenean at nec ullamcorper hendrerit enim. Tortor magnis consequat. 
                    Pede. Fermentum nulla, varius pulvinar ornare arcu adipiscing montes ad vel velit senectus litora tortor dapibus. Nisi cras netus mauris ac ut 
                    pulvinar nulla amet montes ultrices ante. Dolor. Felis gravida ut cursus morbi semper quisque penatibus tristique ligula conubia venenatis torquent 
                    interdum netus dictum phasellus. Fringilla quisque donec taciti vel. Montes consequat turpis litora turpis facilisi hac. Odio. Dictumst velit.</p>
                <p>Eu aenean mollis magnis accumsan dapibus, adipiscing. Porta etiam Risus, nascetur imperdiet. Orci torquent. Vel senectus neque. Quis donec risus. Vestibulum 
                tincidunt interdum habitant a etiam fames habitasse. Dapibus ac, tristique porttitor venenatis velit. Ligula gravida dapibus aliquam, adipiscing neque 
                iaculis eleifend A integer auctor hac. Donec.</p>
            </div>
        </div>

        <div class="spacer"></div>
    </div>

   <script>
        // Initialize Scrollama
        const scroller = scrollama();

        // Get all background images
        const bgImages = document.querySelectorAll('.bg-image');
        const steps = document.querySelectorAll('.step');

        // Setup the instance with 0.5 offset (triggers when element reaches middle of screen)
        scroller
            .setup({
                step: '.step',
                offset: 0.5, // Changed from 0.1 to 0.5 to trigger at middle of screen
                debug: false,
                progress: true // Enable progress tracking for smoother transitions
            })
            .onStepEnter(response => {
                console.log('Step entered:', response.index, 'Progress:', response.progress); // Debug log
                
                // Remove active class from all steps
                steps.forEach(step => step.classList.remove('active'));
                
                // Add active class to current step
                const stepIndex = response.index;
                steps[stepIndex].classList.add('active');
                
                // Handle background image transitions
                // Only change background when the step is at least 50% visible (middle of screen)
                if (response.progress >= 0.5 || response.direction === 'down') {
                    // Remove active class from all background images
                    bgImages.forEach(img => img.classList.remove('active'));
                    
                    // Add active class to current background image
                    if (bgImages[stepIndex]) {
                        bgImages[stepIndex].classList.add('active');
                        console.log('Background changed to image:', stepIndex + 1); // Debug log
                    }
                }
            })
            .onStepExit(response => {
                console.log('Step exited:', response.index, 'Direction:', response.direction); // Debug log
                
                // When scrolling up and exiting a step, revert to previous background
                if (response.direction === 'up') {
                    const prevIndex = Math.max(0, response.index - 1);
                    
                    // Remove active class from all background images
                    bgImages.forEach(img => img.classList.remove('active'));
                    
                    // Activate previous background image
                    if (bgImages[prevIndex]) {
                        bgImages[prevIndex].classList.add('active');
                        console.log('Background reverted to image:', prevIndex + 1); // Debug log
                    }
                }
                
                // Remove active class from exited step
                steps[response.index].classList.remove('active');
            })
            .onStepProgress(response => {
                // Optional: Add smooth progress-based effects here
                // This fires continuously as the user scrolls through each step
                console.log('Step progress:', response.index, response.progress);
                
                // You can add additional progress-based animations here if needed
                // For example, gradually fade backgrounds based on scroll progress
            });

        // Resize function to update Scrollama when window size changes
        function handleResize() {
            scroller.resize();
        }

        // Setup resize event listener
        window.addEventListener('resize', handleResize);

        // Initialize first step and background as active
        if (steps[0]) {
            steps[0].classList.add('active');
        }
        if (bgImages[0]) {
            bgImages[0].classList.add('active');
        }
    </script>
</body>
</html>
